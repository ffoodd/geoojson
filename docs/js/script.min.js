"use strict";!function(){var e=document.getElementById("form"),t=document.getElementById("drop-zone"),n=document.getElementById("input"),a=document.getElementById("input-data"),p=document.getElementById("content"),g=document.getElementById("fieldset"),f=document.getElementById("variable"),v=document.getElementById("filename"),m=document.getElementById("output"),y=document.getElementById("export"),E=document.getElementById("copy"),r=navigator.clipboard;function o(e,t,n){for(var r=t.split(" "),a=0,o=r.length;a<o;a++)e.addEventListener(r[a],n,!1)}function d(e){var t=e[0],n=t.size/1e6,r=new FileReader;a.textContent="".concat(t.name," weights ").concat(n,"Mb."),r.onload=function(e){var t=e.target.result;p.value=t;var n,r,a=JSON.parse(t).features[0];for(var o in a.properties){var d=(r='\n        <input type="checkbox" id="'.concat(n=o,'" name="properties">\n        <label for="').concat(n,'">').concat(n,"</label>"),document.createRange().createContextualFragment(r));g.append(d)}},r.readAsText(t)}o(t,"drag dragstart dragend dragover dragenter dragleave drop",function(e){e.stopPropagation(),e.preventDefault()}),o(t,"dragover dragenter",function(){this.classList.add("dragging")}),o(t,"dragend dragleave drop",function(){this.classList.remove("dragging")}),t.addEventListener("drop",function(e){e.stopPropagation(),e.preventDefault(),d(e.dataTransfer.files)},!1),n.addEventListener("change",function(){d(this.files)},!1),void 0!==r&&(E.hidden=!1,E.addEventListener("click",function(){r.writeText(m.value).then(function(){E.classList.add("is-success")},function(e){E.classList.add("is-error"),console.error("Couldn't copy content to clipoardâ€¦ Error: ".concat(e))})})),e.addEventListener("submit",function(e){e.preventDefault();var t=JSON.parse(p.value),n=t.features.filter(function(e){return null!==e.geometry}),r=["type","features"],a=f.value,o=v.value,d=[];for(var c in t)r.includes(c)||delete t[c];g.querySelectorAll('[name="properties"]:checked').forEach(function(e){d.push(e.id)});for(var i=0;i<n.length;i++){var s=n[i];for(var l in s.properties)d.includes(l)||delete s.properties[l];0===Object.keys(s.properties).length&&delete s.properties}t.features=n;var u=JSON.stringify(t);E.disabled=!1,m.value="var ".concat(a,"=[").concat(u,"]"),y.setAttribute("download","".concat(o,".geojson")),y.href="data:application/json,var%20".concat(a,"=[").concat(u,"]")})}();