"use strict";!function(){var e=document.getElementById("form"),t=document.getElementById("drop-zone"),n=document.getElementById("input"),r=document.getElementById("input-data"),p=document.getElementById("content"),g=document.getElementById("fieldset"),f=document.getElementById("variable"),v=document.getElementById("filename"),m=document.getElementById("output"),y=document.getElementById("export"),E=document.getElementById("copy"),a=navigator.clipboard;function o(e,t,n){for(var a=t.split(" "),r=0,o=a.length;r<o;r++)e.addEventListener(a[r],n,!1)}function d(e){var t=e[0],n=t.size/1e6,a=new FileReader;r.textContent="".concat(t.name," weights ").concat(n,"Mb."),a.onload=function(e){var t=e.target.result;p.value=t;var n,a,r=JSON.parse(t).features[0];for(var o in r.properties){var d=(a='\n        <input type="checkbox" id="'.concat(n=o,'" name="properties">\n        <label for="').concat(n,'">').concat(n,"</label>"),document.createRange().createContextualFragment(a));g.append(d)}},a.readAsText(t)}o(t,"drag dragstart dragend dragover dragenter dragleave drop",function(e){e.stopPropagation(),e.preventDefault()}),o(t,"dragover dragenter",function(){this.classList.add("dragging")}),o(t,"dragend dragleave drop",function(){this.classList.remove("dragging")}),t.addEventListener("drop",function(e){e.stopPropagation(),e.preventDefault(),d(e.dataTransfer.files)},!1),n.addEventListener("change",function(){d(this.files)},!1),void 0!==a&&(E.hidden=!1,E.addEventListener("click",function(){a.writeText(m.value).then(function(){E.classList.add("is-success")},function(e){E.classList.add("is-error"),console.error("Couldn't copy content to clipoardâ€¦ Error: ".concat(e))})})),e.addEventListener("submit",function(e){e.preventDefault();var t=JSON.parse(p.value),n=t.features.filter(function(e){return null!==e.geometry}),a=["type","features"],r=f.value,o=v.value,d=[];for(var c in t)a.includes(c)||delete t[c];g.querySelectorAll('[name="properties"]:checked').forEach(function(e){d.push(e.id)});for(var i=0;i<n.length;i++){var l=n[i];for(var s in l.properties)d.includes(s)||delete l.properties[s];0===Object.keys(l.properties).length&&delete l.properties}t.features=n;var u=JSON.stringify(t);E.disabled=!1,""===r?(m.value="".concat(u),y.href="data:application/json,".concat(u)):(m.value="var ".concat(r,"=[").concat(u,"]"),y.href="data:application/json,var%20".concat(r,"=[").concat(u,"]")),y.setAttribute("download","".concat(o,".geojson"))})}();